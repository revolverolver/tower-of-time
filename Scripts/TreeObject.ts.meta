fileFormatVersion: 2
guid: 281d5b2fc67fe874ca6ddf5bcdfc8795
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: 11500000, guid: 22604dd76f55453daccee3ed9e7b94b5, type: 3}
  SerializedAsset: '{"__scriptableObject__name":"TreeObject","__scriptableObject__type":"Genies.Scripting.AssetTypes.TsAsset,
    Genies.Scripting, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null","IsCompiled":true,"CompilerVersion":"2.0.66","ReferencedSpecifiers":["@assets/Experience/tower-of-time/Scripts/WoodBackpack","@assets/Experience/tower-of-time/Scripts/PlayerSounds","@assets/Experience/tower-of-time/Scripts/CameraMovement","@assets/Experience/tower-of-time/Scripts/RoundManager","@assets/Experience/tower-of-time/Scripts/PlayerController","@assets/Experience/tower-of-time/Scripts/Upgrades"],"Source":"\"use
    strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst
    UnityEngine_1 = require(\"UnityEngine\");\nconst WoodBackpack_1 = require(\"@assets/Experience/tower-of-time/Scripts/WoodBackpack\");\nconst
    PlayerSounds_1 = require(\"@assets/Experience/tower-of-time/Scripts/PlayerSounds\");\nconst
    CameraMovement_1 = require(\"@assets/Experience/tower-of-time/Scripts/CameraMovement\");\nconst
    Upgrades_1 = require(\"@assets/Experience/tower-of-time/Scripts/Upgrades\");\nclass
    TreeObject extends UnityEngine_1.MonoBehaviour {\n    constructor() {\n       
    super(...arguments);\n        this.woodLeft = 5;\n        this.chopTime = 0.8;\n       
    this.respawnTime = 180;\n        this.currentReSpawnTime = 180;\n    }\n    //Called
    when script instance is loaded\n    Awake() { }\n    //Start is called on the
    frame when a script is enabled just \n    //before any of the Update methods
    are called the first time.\n    Start() {\n        // stop respawn coroutines\n       
    this.StopAllCoroutines();\n        this.respawnTime = Upgrades_1.default.reGrowthTime;\n       
    this.currentReSpawnTime = Upgrades_1.default.reGrowthTime;\n        this.playerSounds
    = PlayerSounds_1.default.Instance;\n        this.animator.applyRootMotion = true;\n       
    this.gameManager = CameraMovement_1.default.Instance;\n        this.gameManager.OnCameraStateChange.addListener(this.CheckGameState,
    //@ts-ignore\n        this);\n    }\n    CheckGameState(newState) {\n       
    switch (newState) {\n            case CameraMovement_1.CameraState.FOLLOWING_PLAYER:\n               
    this.isPlaying = true;\n                break;\n            default:\n               
    this.isPlaying = false;\n                break;\n        }\n    }\n    //Update
    is called every frame, if the MonoBehaviour is enabled.\n    Update() {\n       
    if (this.isChopping && this.isPlaying) {\n            if (this.chopTime > 0)
    {\n                // Chopping\n                this.chopTime -= UnityEngine_1.Time.deltaTime;\n           
    }\n            else {\n                // Chop once\n                this.Chop();\n               
    // Reset chopping\n                this.chopTime = 1.4 - (0.6 * Upgrades_1.default.chopSpeed);
    // OG chopTime: 0.8\n            }\n        }\n    }\n    StartChopping() {\n       
    if (WoodBackpack_1.default.woodFull)\n            return;\n        this.isChopping
    = true;\n        this.chopTime = 1.4 - (0.6 * Upgrades_1.default.chopSpeed);
    // OG chopTime: 0.8\n        // Chop once\n        this.Chop();\n    }\n    StopChopping()
    {\n        this.isChopping = false;\n    }\n    Chop() {\n        if (WoodBackpack_1.default.woodFull)
    {\n            // Stop chopping if wood inventory is full\n            this.StopChopping();\n           
    return;\n        }\n        // Spawn Wood\n        const woodChunk = UnityEngine_1.Object.Instantiate(this.wood,
    UnityEngine_1.Vector3.op_Addition(this.transform.position, UnityEngine_1.Vector3.up),
    UnityEngine_1.Quaternion.identity);\n        this.woodLeft--;\n        // Play
    Animation\n        // @ts-ignore\n        this.animator.Play_EBB7509C_H78681CF5((\"Chop\"),
    -1, (0));\n        // Play Sound\n        this.playerSounds.PlayQuickSound(0);\n       
    if (this.woodLeft <= 0) {\n            // Chopped the whole tree\n           
    this.StopChopping();\n            this.treeMesh.SetActive(false);\n           
    this.shadow.SetActive(false);\n            // @ts-ignore\n            this.gameObject.GetComponent($typeof(UnityEngine_1.Collider)).enabled
    = false;\n            // Respawn\n            this.respawnTime = Upgrades_1.default.reGrowthTime;\n           
    this.StartCoroutine(this.RespawnTree());\n        }\n    }\n    *RespawnTree()
    {\n        // Wait for respawn / Time only ticks down when a round is active\n       
    while (this.respawnTime > 0) {\n            if (this.isPlaying) {\n               
    this.respawnTime -= UnityEngine_1.Time.deltaTime;\n                // Check if
    regrowth time has been upgraded\n                if (this.currentReSpawnTime
    > Upgrades_1.default.reGrowthTime) {\n                    // Regrowth time has
    been upgraded, so let''s spawn the tree faster\n                    let dif =
    this.currentReSpawnTime - Upgrades_1.default.reGrowthTime;\n                   
    this.respawnTime -= dif;\n                    this.currentReSpawnTime = Upgrades_1.default.reGrowthTime;\n               
    }\n                yield null;\n            }\n            else {\n               
    yield null;\n            }\n        }\n        // New wood\n        this.woodLeft
    = 5;\n        // Show Mesh\n        this.treeMesh.SetActive(true);\n        this.shadow.SetActive(true);\n       
    // Play Animation\n        // @ts-ignore\n        this.animator.Play_EBB7509C_H78681CF5((\"Grow\"),
    -1, (0));\n        // Wait for animation to finish\n        yield new UnityEngine_1.WaitForSeconds(2.0);\n       
    // Enable collider after animation\n        // @ts-ignore\n        this.gameObject.GetComponent($typeof(UnityEngine_1.Collider)).enabled
    = true;\n    }\n}\nexports.default = TreeObject;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFlBQVksQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDO1FBRW5DLElBQUksSUFBSSxDQUFDLFFBQVEsSUFBSSxDQUFDLEVBQ3RCO1lBQ0kseUJBQXdCO1lBQ3hCLElBQUksQ0FBQyxZQUFZLEVBQUU7WUFFbkIsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO1lBQzlCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQztZQUM3QjtZQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsWUFBVyxTQUFFLHNCQUFPLEVBQUksQ0FBQyxPQUFPLEdBQUcsS0FBSztZQUV4RCxVQUFTO1lBQ1QsSUFBSSxDQUFDLFdBQVcsR0FBRyxrQkFBUSxDQUFDLFlBQVk7WUFDeEMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUM7UUFDM0M7SUFDSjtJQUVBLENBQUMsV0FBVztRQUVSLGlFQUFnRTtRQUNoRSxPQUFPLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxFQUMzQjtZQUNJLElBQUksSUFBSSxDQUFDLFNBQVMsRUFDbEI7Z0JBQ0ksSUFBSSxDQUFDLFdBQVcsSUFBSSxrQkFBSSxDQUFDLFNBQVM7Z0JBRWxDLDJDQUEwQztnQkFDMUMsSUFBSSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsa0JBQVEsQ0FBQyxZQUFZLEVBQ25EO29CQUNJLGtFQUFpRTtvQkFDakUsSUFBSSxHQUFHLEdBQUcsSUFBSSxDQUFDLGtCQUFrQixHQUFHLGtCQUFRLENBQUMsWUFBWTtvQkFDekQsSUFBSSxDQUFDLFdBQVcsSUFBSSxHQUFHO29CQUV2QixJQUFJLENBQUMsa0JBQWtCLEdBQUcsa0JBQVEsQ0FBQyxZQUFZO2dCQUNuRDtnQkFFQSxNQUFNLElBQUk7WUFDZDtpQkFFQTtnQkFDSSxNQUFNLElBQUk7WUFDZDtRQUNKO1FBRUEsV0FBVTtRQUNWLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQztRQUVqQixZQUFXO1FBQ1gsSUFBSSxDQUFDLFFBQVEsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDO1FBQzdCLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQztRQUUzQixpQkFBZ0I7UUFDakI7UUFBQyxJQUFJLENBQUMsUUFBUSxDQUFDLHVCQUFHLENBQUMsQ0FBQyxNQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsR0FBRSxFQUFDLENBQUM7UUFFakMsK0JBQThCO1FBQzlCLE1BQU0sSUFBSSw0QkFBYyxDQUFDLEdBQUcsQ0FBQztRQUU3QixrQ0FBaUM7UUFDbEM7UUFBQyxJQUFJLENBQUMsVUFBVSxDQUFDLFlBQVcsU0FBRSxzQkFBTyxFQUFJLENBQUMsT0FBTyxHQUFHLElBQUk7SUFDM0Q7Q0FDSjtBQXJLQSw2QkFxS0EiLCJuYW1lcyI6W10sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VzIjpbIlRyZWVPYmplY3QudHMiXSwic291cmNlc0NvbnRlbnQiOltudWxsXX0=","ScriptHash":"f8eb06915b4d2bd6b2d56c894048d36f","Specifier":"@assets/Experience/tower-of-time/Scripts/TreeObject","DefaultTypeName":"@assets/Experience/tower-of-time/Scripts/TreeObject.TreeObject","IsMonobehaviour":true,"IsScriptableObj":false,"InheritanceChain":["@assets/Experience/tower-of-time/Scripts/TreeObject.TreeObject","UnityEngine.MonoBehaviour","UnityEngine.Behaviour","UnityEngine.Component","UnityEngine.Object","@com.genies.scripting@1.13.0\\Runtime\\Typing\\index.d.System.Object"],"Properties":[{"Path":"animator","Name":"animator","TypeName":"UnityEngine.Animator","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Animator","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"wood","Name":"wood","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Wood","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"treeMesh","Name":"treeMesh","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Tree
    Mesh","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"shadow","Name":"shadow","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Shadow","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null}],"SupportedUiEvents":"None"}'
