fileFormatVersion: 2
guid: 41bfc80fcfac38245a75b4311f86c84c
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: 11500000, guid: 22604dd76f55453daccee3ed9e7b94b5, type: 3}
  SerializedAsset: '{"IsCompiled":true,"CompilerVersion":"2.0.63","ReferencedSpecifiers":["@assets/Experience/tower-of-time/Scripts/PlayerController","@assets/Experience/tower-of-time/Scripts/CameraMovement"],"Source":"\"use
    strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst
    UnityEngine_1 = require(\"UnityEngine\");\nconst PlayerController_1 = require(\"@assets/Experience/tower-of-time/Scripts/PlayerController\");\nconst
    CameraMovement_1 = require(\"@assets/Experience/tower-of-time/Scripts/CameraMovement\");\nclass
    JoystickControls extends UnityEngine_1.MonoBehaviour {\n    constructor() {\n       
    super(...arguments);\n        this.touching = false;\n    }\n    //Called when
    script instance is loaded\n    Awake() { }\n    //Start is called on the frame
    when a script is enabled just \n    //before any of the Update methods are called
    the first time.\n    Start() {\n        this.gameManager = CameraMovement_1.default.Instance;\n       
    this.baseIdlePosition = this.base.position;\n        this.gameManager.OnCameraStateChange.addListener(this.CheckGameState,
    //@ts-ignore\n        this);\n    }\n    CheckGameState(newState) {\n       
    switch (newState) {\n            case CameraMovement_1.CameraState.PAN_TO_CLOCK_TOWER:\n               
    this.Nullify();\n                break;\n        }\n    }\n    //Update is called
    every frame, if the MonoBehaviour is enabled.\n    Update() {\n        // Start
    Touch\n        if (UnityEngine_1.Input.GetMouseButtonDown(0)) {\n           
    this.touchStartPosition = UnityEngine_1.Input.mousePosition;\n            this.base.position
    = this.touchStartPosition;\n            this.touching = true;\n            //
    Animate Running\n            this.playerController.ChangeAnimatorState(1);\n       
    }\n        // Holding Touch\n        if (UnityEngine_1.Input.GetMouseButton(0))
    {\n            // Position handle based on direction and distance from the base\n           
    let direction = UnityEngine_1.Vector3.op_Subtraction(this.base.position, UnityEngine_1.Input.mousePosition);\n           
    let distance = UnityEngine_1.Vector3.Distance(this.base.position, UnityEngine_1.Input.mousePosition);\n           
    if (distance < 100) {\n                // Handle is within base\n               
    this.handle.position = UnityEngine_1.Input.mousePosition;\n            }\n           
    else {\n                // Handle is at max distance\n                this.handle.position
    = UnityEngine_1.Vector3.op_Subtraction(this.base.position, // @ts-ignore\n               
    UnityEngine_1.Vector3.op_Multiply_EBB7509C_H75CC56AF(direction.normalized, (100)));\n               
    distance = 100;\n            }\n            // Send Input data to player controller\n           
    this.playerController.GetJoystickInput(direction, distance);\n        }\n       
    // Touch Released\n        if (UnityEngine_1.Input.GetMouseButtonUp(0)) {\n           
    this.base.position = this.baseIdlePosition;\n            this.handle.position
    = this.base.position;\n            this.touching = false;\n            // Animate
    Idle\n            this.playerController.ChangeAnimatorState(0);\n        }\n       
    if (this.touching == false) {\n            // No input from the joystick when
    not touching the screen\n            this.playerController.GetJoystickInput(UnityEngine_1.Vector3.zero,
    0);\n        }\n    }\n    Nullify() {\n        this.base.position = this.baseIdlePosition;\n       
    this.handle.position = this.base.position;\n        this.touching = false;\n       
    PlayerController_1.default.movement = 0;\n        // Animate Idle\n        this.playerController.ChangeAnimatorState(0);\n   
    }\n}\nexports.default = JoystickControls;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSm95c3RpY2tDb250cm9scy5qcyIsIm1hcHBpbmdzIjoiOztBQUNBLDZDQUFrSTtBQUlsSSxnR0FBaUQ7QUFDakQsNEZBQTREO0FBRTVELE1BQXFCLGdCQUFpQixTQUFRLDJCQUFhO0lBQTNEOztRQVdJLGFBQVEsR0FBVSxLQUFLO0lBNEYzQjtJQTFGSSx1Q0FBc0M7SUFDOUIsS0FBSyxLQUFXO0lBRXhCLDZEQUE0RDtJQUM1RCw2REFBNEQ7SUFDcEQsS0FBSztRQUVULElBQUksQ0FBQyxXQUFXLEdBQUcsd0JBQWMsQ0FBQyxRQUFRO1FBQzFDLElBQUksQ0FBQyxnQkFBZ0IsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVE7UUFFMUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLGNBQWE7WUFBQyxDQUFDO0lBQ3pFO0lBRVEsY0FBYyxDQUFDLFFBQXFCO1FBQ3hDLFFBQU8sUUFBUSxFQUFFO1lBQ2IsS0FBSyw0QkFBVyxDQUFDLGtCQUFrQjtnQkFDL0IsSUFBSSxDQUFDLE9BQU8sRUFBRTtnQkFDZCxNQUFLO1FBQ2I7SUFDSjtJQUVBLGdFQUErRDtJQUN2RCxNQUFNO1FBRVYsY0FBYTtRQUNiLElBQUksbUJBQUssQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDLENBQUMsRUFDL0I7WUFDSSxJQUFJLENBQUMsa0JBQWtCLEdBQUcsbUJBQUssQ0FBQyxhQUFhO1lBQzdDLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxrQkFBa0I7WUFFNUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJO1lBRXBCLGtCQUFpQjtZQUNqQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO1FBQ2hEO1FBRUEsZ0JBQWU7UUFDZixJQUFJLG1CQUFLLENBQUMsY0FBYyxDQUFDLENBQUMsQ0FBQyxFQUMzQjtZQUNJLGdFQUErRDtZQUMvRCxJQUFJLFNBQVMsR0FBRyxxQkFBTyxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxtQkFBSyxDQUFDLGFBQWEsQ0FBQztZQUMvRSxJQUFJLFFBQVEsR0FBRyxxQkFBTyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsRUFBRSxtQkFBSyxDQUFDLGFBQWEsQ0FBQztZQUV4RSxJQUFJLFFBQVEsR0FBRyxHQUFHLEVBQ2xCO2dCQUNJLHdCQUF1QjtnQkFDdkIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsbUJBQUssQ0FBQyxhQUFhO1lBQzlDO2lCQUVBO2dCQUNJLDRCQUEyQjtnQkFDM0IsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEdBQUUscUNBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFPLEVBQUMsYUFBQztxRUFBRSxTQUFTLENBQUMsVUFBUyxFQUFDLENBQUcsR0FBRSxHQUFDO2dCQUN0RSxRQUFRLEdBQUcsR0FBRztZQUNsQjtZQUVBLHVDQUFzQztZQUN0QyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsZ0JBQWdCLENBQUMsU0FBUyxFQUFFLFFBQVEsQ0FBQztRQUMvRDtRQUVBLGlCQUFnQjtRQUNoQixJQUFJLG1CQUFLLENBQUMsZ0JBQWdCLENBQUMsQ0FBQyxDQUFDLEVBQzdCO1lBQ0ksSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLGdCQUFnQjtZQUMxQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVE7WUFFekMsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLO1lBRXJCLGVBQWM7WUFDZCxJQUFJLENBQUMsZ0JBQWdCLENBQUMsbUJBQW1CLENBQUMsQ0FBQyxDQUFDO1FBQ2hEO1FBRUEsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLEtBQUssRUFDMUI7WUFDSSwwREFBeUQ7WUFDekQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLGdCQUFnQixDQUFDLHFCQUFPLENBQUMsSUFBSSxFQUFFLENBQUMsQ0FBQztRQUMzRDtJQUNKO0lBRVEsT0FBTztRQUVYLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxnQkFBZ0I7UUFDMUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRO1FBRXpDLElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSztRQUVyQiwwQkFBZ0IsQ0FBQyxRQUFRLEdBQUcsQ0FBQztRQUU3QixlQUFjO1FBQ2QsSUFBSSxDQUFDLGdCQUFnQixDQUFDLG1CQUFtQixDQUFDLENBQUMsQ0FBQztJQUNoRDtDQUNKO0FBdkdBLG1DQXVHQSIsIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZXMiOlsiSm95c3RpY2tDb250cm9scy50cyJdLCJzb3VyY2VzQ29udGVudCI6W251bGxdfQ==","ScriptHash":"da700cae54aa3e8a95b10454de27629b","Specifier":"@assets/Experience/tower-of-time/Scripts/JoystickControls","DefaultTypeName":"@assets/Experience/tower-of-time/Scripts/JoystickControls.JoystickControls","IsMonobehaviour":true,"IsScriptableObj":false,"InheritanceChain":["@assets/Experience/tower-of-time/Scripts/JoystickControls.JoystickControls","UnityEngine.MonoBehaviour","UnityEngine.Behaviour","UnityEngine.Component","UnityEngine.Object","@com.genies.scripting@1.11.0\\Runtime\\Typing\\index.d.System.Object"],"Properties":[{"Path":"base","Name":"base","TypeName":"UnityEngine.Transform","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Base","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"handle","Name":"handle","TypeName":"UnityEngine.Transform","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Handle","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"playerController","Name":"playerController","TypeName":"@assets/Experience/tower-of-time/Scripts/PlayerController.PlayerController","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":true,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Player
    Controller","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"touching","Name":"touching","TypeName":"System.Boolean","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[],"Initializers":["false"],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Touching","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null}],"SupportedUiEvents":"None","DisplayName":"JoystickControls","name":"JoystickControls","hideFlags":"NotEditable"}'
