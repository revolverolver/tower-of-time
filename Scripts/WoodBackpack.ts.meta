fileFormatVersion: 2
guid: 34e9c9bcd63c3bb458b990bcf2a1f4a0
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: 11500000, guid: 22604dd76f55453daccee3ed9e7b94b5, type: 3}
  SerializedAsset: '{"IsCompiled":true,"CompilerVersion":"2.0.9","ReferencedSpecifiers":["@assets/Experience/tower-of-time/Scripts/WoodPiece","@assets/Experience/tower-of-time/Scripts/Building"],"Source":"\"use
    strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst
    UnityEngine_1 = require(\"UnityEngine\");\nclass WoodBackpack extends UnityEngine_1.MonoBehaviour
    {\n    constructor() {\n        super(...arguments);\n        this.maxWood =
    20;\n        this.sendAmount = 0;\n        this.sendingWood = false;\n       
    this.sendTime = 0.1;\n        this.woodTimer = this.sendTime;\n    }\n    //Called
    when script instance is loaded\n    Awake() { }\n    //Start is called on the
    frame when a script is enabled just \n    //before any of the Update methods
    are called the first time.\n    Start() { }\n    //Update is called every frame,
    if the MonoBehaviour is enabled.\n    Update() {\n        if (this.sendingWood)
    {\n            if (this.woodTimer <= 0 && this.sendAmount > 0) {\n               
    this.SendWoodPiece();\n                // Reset timer\n                this.woodTimer
    = this.sendTime;\n            }\n            this.woodTimer -= UnityEngine_1.Time.deltaTime;\n       
    }\n    }\n    AddWoodToBackpack(obj) {\n        // Disable collider and wood
    script to prevent multiple adds\n        let collider = obj.GetComponent($typeof(UnityEngine_1.Collider));\n       
    collider.enabled = false;\n        let woodPiece = // @ts-ignore\n         obj.GetComponent(\"@assets/Experience/tower-of-time/Scripts/WoodPiece.WoodPiece\");\n       
    woodPiece.carried = true;\n        // Place wood in free slot in backpack\n       
    let wood = obj.transform;\n        wood.SetParent(this.slots[WoodBackpack.woodAmount]);\n       
    wood.transform.localPosition = UnityEngine_1.Vector3.zero;\n        // Adjust
    rotation\n        wood.localRotation = // @ts-ignore\n            UnityEngine_1.Quaternion.Euler_EBB7509C_E4172388((0),
    (0), (90));\n        // Increase wood carried\n        WoodBackpack.woodAmount++;\n       
    // Update text\n        this.woodText.text = WoodBackpack.woodAmount + \"/\"
    + this.maxWood;\n        if (WoodBackpack.woodAmount >= this.maxWood) {\n           
    WoodBackpack.woodFull = true;\n        }\n    }\n    StartSendingWood(obj) {\n       
    // Ask building if it needs wood and how much\n        let building = // @ts-ignore\n        
    obj.GetComponent(\"@assets/Experience/tower-of-time/Scripts/Building.Building\");\n       
    let woodToSend = building.WoodNeeded();\n        if (woodToSend == 0)\n           
    return;\n        // Start Sending Wood\n        this.currentBuilding = obj;\n       
    this.sendAmount = woodToSend;\n        this.sendingWood = true;\n        this.woodTimer
    = this.sendTime;\n        // Send first piece before starting the timer\n       
    this.SendWoodPiece();\n    }\n    SendWoodPiece() {\n        // Send piece from
    top of backpack\n        console.log(this.slots[WoodBackpack.woodAmount - 1].GetChild(0).name);\n       
    let woodPiece = this.slots[WoodBackpack.woodAmount - 1].GetChild(0);\n       
    let wood = // @ts-ignore\n         woodPiece.GetComponent(\"@assets/Experience/tower-of-time/Scripts/WoodPiece.WoodPiece\");\n       
    wood.SendToBuilding(this.currentBuilding);\n        WoodBackpack.woodAmount--;\n       
    this.sendAmount--;\n        // Update text\n        this.woodText.text = WoodBackpack.woodAmount.toString()
    + \"/\" + this.maxWood.toString();\n        // Check if there is wood left\n       
    if (WoodBackpack.woodAmount <= 0 || this.sendAmount <= 0) {\n            // No
    more wood to send so let''s stop sending\n            this.sendingWood = false;\n       
    }\n        else if (WoodBackpack.woodFull) {\n            // Backpack no longer
    full\n            WoodBackpack.woodFull = false;\n        }\n    }\n    OnTriggerEnter(other)
    {\n        // Getting Wood\n        if (other.tag == \"Wood\") {\n           
    if (WoodBackpack.woodFull) {\n                // Inventory full\n               
    UnityEngine_1.Object.Destroy(other.gameObject);\n            }\n            else
    {\n                // Add wood\n                this.AddWoodToBackpack(other.gameObject);\n           
    }\n        }\n        // Building\n        if (other.tag == \"Building\") {\n           
    if (WoodBackpack.woodAmount <= 0)\n                return;\n            // Player
    is carrying wood and will start sending wood\n            this.StartSendingWood(other.gameObject);\n       
    }\n    }\n    OnTriggerExit(other) {\n        // Building\n        if (other.tag
    == \"Building\") {\n            this.sendingWood = false;\n        }\n    }\n}\nWoodBackpack.woodAmount
    = 0;\nexports.default = WoodBackpack;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QyxZQUFZLENBQUMsVUFBVSxHQUFHLENBQUMsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUM7UUFDbkUsSUFBSSxJQUFJLEdBQUU7U0FBQyxTQUFTLENBQUMsWUFBVywrREFBVSxDQUFJO1FBQzlDLElBQUksQ0FBQyxjQUFjLENBQUMsSUFBSSxDQUFDLGVBQWUsQ0FBQztRQUV6QyxZQUFZLENBQUMsVUFBVSxFQUFFO1FBQ3pCLElBQUksQ0FBQyxVQUFVLEVBQUU7UUFFakIsY0FBYTtRQUNiLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxHQUFHLFlBQVksQ0FBQyxVQUFVLENBQUMsUUFBUSxFQUFFLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFO1FBRXZGLDhCQUE2QjtRQUM3QixJQUFJLFlBQVksQ0FBQyxVQUFVLElBQUksQ0FBQyxJQUFJLElBQUksQ0FBQyxVQUFVLElBQUksQ0FBQyxFQUN4RDtZQUNJLDZDQUE0QztZQUM1QyxJQUFJLENBQUMsV0FBVyxHQUFHLEtBQUs7UUFDNUI7YUFDSyxJQUFJLFlBQVksQ0FBQyxRQUFRLEVBQzlCO1lBQ0ksMEJBQXlCO1lBQ3pCLFlBQVksQ0FBQyxRQUFRLEdBQUcsS0FBSztRQUNqQztJQUNKO0lBRUEsY0FBYyxDQUFDLEtBQWU7UUFFMUIsZUFBYztRQUNkLElBQUksS0FBSyxDQUFDLEdBQUcsSUFBSSxNQUFNLEVBQ3ZCO1lBQ0ksSUFBSSxZQUFZLENBQUMsUUFBUSxFQUN6QjtnQkFDSSxpQkFBZ0I7Z0JBQ2hCLG9CQUFNLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUM7WUFDcEM7aUJBRUE7Z0JBQ0ksV0FBVTtnQkFDVixJQUFJLENBQUMsaUJBQWlCLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQztZQUM1QztRQUNKO1FBRUEsV0FBVTtRQUNWLElBQUksS0FBSyxDQUFDLEdBQUcsSUFBSSxVQUFVLEVBQzNCO1lBQ0ksSUFBSSxZQUFZLENBQUMsVUFBVSxJQUFJLENBQUM7Z0JBQzVCLE9BQU07WUFFVixzREFBcUQ7WUFDckQsSUFBSSxDQUFDLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxVQUFVLENBQUM7UUFDM0M7SUFDSjtJQUVRLGFBQWEsQ0FBQyxLQUFlO1FBRWpDLFdBQVU7UUFDVixJQUFJLEtBQUssQ0FBQyxHQUFHLElBQUksVUFBVSxFQUMzQjtZQUNJLElBQUksQ0FBQyxXQUFXLEdBQUcsS0FBSztRQUM1QjtJQUNKOztBQXBKYyx1QkFBVSxHQUFRLENBQUMsQUFBVCxDQUFTO2tCQVBoQixZQUFZIiwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJXb29kQmFja3BhY2sudHMiXSwic291cmNlc0NvbnRlbnQiOltudWxsXX0=","ScriptHash":"1f7d1b9727267c57a01f266c52cef3cb","Specifier":"@assets/Experience/tower-of-time/Scripts/WoodBackpack","DefaultTypeName":"@assets/Experience/tower-of-time/Scripts/WoodBackpack.WoodBackpack","IsMonobehaviour":true,"IsScriptableObj":false,"InheritanceChain":["@assets/Experience/tower-of-time/Scripts/WoodBackpack.WoodBackpack","UnityEngine.MonoBehaviour","UnityEngine.Behaviour","UnityEngine.Component","UnityEngine.Object","@com.genies.scripting@1.6.0\\Runtime\\Typing\\index.d.System.Object"],"Properties":[{"Path":"woodText","Name":"woodText","TypeName":"TMPro.TextMeshProUGUI","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Wood
    Text"},{"Path":"backpack","Name":"backpack","TypeName":"UnityEngine.Transform","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Backpack"},{"Path":"slots","Name":"slots","TypeName":"UnityEngine.Transform","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":1,"IsArray":true,"IsEnum":false,"ArrayElementInitializer":{"Path":"slots_D1","Name":"slots","TypeName":"UnityEngine.Transform","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[],"Initializers":[],"ArrayDimension":1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Slots"},"ChildProperties":[],"PrettyName":"Slots"}],"SupportedUiEvents":0,"DisplayName":"WoodBackpack","name":"WoodBackpack","hideFlags":8}'
