fileFormatVersion: 2
guid: 3cf08003f08755049935cf03aef00c19
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: 11500000, guid: 22604dd76f55453daccee3ed9e7b94b5, type: 3}
  SerializedAsset: '{"__scriptableObject__name":"GameOverManager","__scriptableObject__type":"Genies.Scripting.AssetTypes.TsAsset,
    Genies.Scripting, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null","IsCompiled":true,"CompilerVersion":"2.0.66","ReferencedSpecifiers":["@assets/Experience/tower-of-time/Scripts/RoundManager","@assets/Experience/tower-of-time/Scripts/GameSetup","@assets/Experience/tower-of-time/Scripts/EnemySpawner","@assets/Experience/tower-of-time/Scripts/Turret","@assets/Experience/tower-of-time/Scripts/UpgradeMenu","@assets/Experience/tower-of-time/Scripts/GameManager","@assets/Experience/tower-of-time/Scripts/CameraMovement","@assets/Experience/tower-of-time/Scripts/PlayerSounds"],"Source":"\"use
    strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst
    UnityEngine_1 = require(\"UnityEngine\");\nconst RoundManager_1 = require(\"@assets/Experience/tower-of-time/Scripts/RoundManager\");\nconst
    UnityEngine_SceneManagement_1 = require(\"UnityEngine.SceneManagement\");\nconst
    Genies_Experience_CloudSave_1 = require(\"Genies.Experience.CloudSave\");\nclass
    GameOverManager extends UnityEngine_1.MonoBehaviour {\n    //Called when script
    instance is loaded\n    Awake() { }\n    //Start is called on the frame when
    a script is enabled just \n    //before any of the Update methods are called
    the first time.\n    Start() {\n        this.restartButton.onClick.AddListener(()
    => this.PlayAgain());\n    }\n    OnEnable() {\n        this.SetupScores();\n   
    }\n    //Update is called every frame, if the MonoBehaviour is enabled.\n   
    Update() { }\n    SetupScores() {\n        // You survived this many rounds\n       
    this.roundsSurvivedText.text = RoundManager_1.default.round.toString();\n       
    // Your best score\n        this.GetSetBestScore();\n    }\n    async GetSetBestScore()
    {\n        let storage = new Genies_Experience_CloudSave_1.CloudSaveStorage(\"ScoreStorage\");\n       
    let bestKey = \"BestScore\";\n        await this.EstablishScoreData(storage,
    bestKey, 0);\n        // Get best score from cloud save\n        let bestScore
    = storage.GetInt(bestKey);\n        // Check if the best score if beaten\n       
    if (RoundManager_1.default.round > bestScore) {\n            // Save new best
    score\n            bestScore = RoundManager_1.default.round;\n            await
    $promise(storage.Load());\n            await storage.SetInt(bestKey, bestScore);\n           
    await $promise(storage.Save());\n        }\n        // Set best score Text\n       
    this.yourBestText.text = bestScore.toString();\n    }\n    async EstablishScoreData(storage,
    scoreKey, defaultValue) {\n        //Load data from storage\n        await $promise(storage.Load());\n       
    //Check if key exists in data\n        if (storage.Has(scoreKey)) {\n           
    //Get key value from data\n            let score = storage.GetInt(scoreKey);\n           
    console.log(\"Storage of \" + scoreKey + \" has a value of \" + score.toString());\n       
    }\n        else {\n            console.log(\"Storage of \" + scoreKey + \" does
    not have a value yet\");\n            //Set initial key value\n            storage.SetInt(scoreKey,
    defaultValue);\n            //Save data to storage\n            await $promise(storage.Save());\n           
    console.log(\"Storage of \" + scoreKey + \" now has a value of \" + defaultValue);\n       
    }\n    }\n    PlayAgain() {\n        // Show loading screen\n        console.log(`PLAY
    AGAIN`);\n        // Remove Instances\n        //UpgradeMenu.Instance.DestroyInstance();\n       
    //GameManager.Instance.DestroyInstance();\n        //CameraMovement.Instance.DestroyInstance();\n       
    //PlayerSounds.Instance.DestroyInstance();\n        UnityEngine_SceneManagement_1.SceneManager.LoadScene(UnityEngine_SceneManagement_1.SceneManager.GetActiveScene().name);\n       
    // Restart Everything\n        //this.setupManager.RestartEverything();\n   
    }\n}\nexports.default = GameOverManager;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2FtZU92ZXJNYW5hZ2VyLmpzIiwibWFwcGluZ3MiOiI7O0FBRUEsNkNBQXVEO0FBQ3ZELHdGQUF5QztBQUN6Qyw2RUFBMEQ7QUFFMUQsNkVBQThEO0FBUTlELE1BQXFCLGVBQWdCLFNBQVEsMkJBQWE7SUFhdEQsdUNBQXNDO0lBQzlCLEtBQUssS0FBVztJQUV4Qiw2REFBNEQ7SUFDNUQsNkRBQTREO0lBQ3BELEtBQUs7UUFFVCxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxXQUFXLE9BQUMsSUFBSSxDQUFDLFNBQVEsRUFBQyxDQUFDO0lBQzFEO0lBRVEsUUFBUTtRQUVaLElBQUksQ0FBQyxXQUFXLEVBQUU7SUFDdEI7SUFFQSxnRUFBK0Q7SUFDdkQsTUFBTSxLQUFXO0lBRWpCLFdBQVc7UUFFZixnQ0FBK0I7UUFDL0IsSUFBSSxDQUFDLGtCQUFrQixDQUFDLElBQUksR0FBRyxzQkFBWSxDQUFDLEtBQUssQ0FBQyxRQUFRLEVBQUU7UUFFNUQsa0JBQWlCO1FBQ2pCLElBQUksQ0FBQyxlQUFlLEVBQUU7SUFDMUI7SUFFQSxLQUFLLENBQUMsZUFBZTtRQUVqQixJQUFJLE9BQU8sR0FBcUIsSUFBSSw4Q0FBZ0IsQ0FBQyxjQUFjLENBQUM7UUFDcEUsSUFBSSxPQUFPLEdBQUcsV0FBVztRQUV6QixNQUFNLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsQ0FBQztRQUVsRCxpQ0FBZ0M7UUFDaEMsSUFBSSxTQUFTLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUM7UUFFdkMsb0NBQW1DO1FBQ25DLElBQUksc0JBQVksQ0FBQyxLQUFLLEdBQUcsU0FBUyxFQUNsQztZQUNJLHNCQUFxQjtZQUNyQixTQUFTLEdBQUcsc0JBQVksQ0FBQyxLQUFLO1lBQzlCLE1BQUssU0FBQyxPQUFPLENBQUMsSUFBSSxFQUFDLENBQUM7WUFDcEIsTUFBTSxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxTQUFTLENBQUM7WUFDeEMsTUFBSyxTQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUMsQ0FBQztRQUN4QjtRQUVBLHNCQUFxQjtRQUNyQixJQUFJLENBQUMsWUFBWSxDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsUUFBUSxFQUFFO0lBQ2pEO0lBRVEsS0FBSyxDQUFDLGtCQUFrQixDQUFDLE9BQXlCLEVBQUUsUUFBZ0IsRUFBRSxZQUFpQjtRQUMzRix3QkFBdUI7UUFDdkIsTUFBSyxTQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUMsQ0FBQztRQUNwQiw2QkFBNEI7UUFDNUIsSUFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxFQUFFO1lBQ3ZCLHlCQUF3QjtZQUN4QixJQUFJLEtBQUssR0FBUyxPQUFPLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztZQUMxQyxPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxRQUFRLEdBQUcsa0JBQWtCLEdBQUcsS0FBSyxDQUFDLFFBQVEsRUFBRSxDQUFDO1FBQ2pGLENBQUM7YUFBSTtZQUNELE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLFFBQVEsR0FBRyw0QkFBNEIsQ0FBQztZQUNwRSx1QkFBc0I7WUFDdEIsT0FBTyxDQUFDLE1BQU0sQ0FBQyxRQUFRLEVBQUUsWUFBWSxDQUFDO1lBQ3RDLHNCQUFxQjtZQUNyQixNQUFLLFNBQUMsT0FBTyxDQUFDLElBQUksRUFBQyxDQUFDO1lBQ3BCLE9BQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxHQUFHLFFBQVEsR0FBRyxzQkFBc0IsR0FBRyxZQUFZLENBQUM7UUFDakY7SUFDSjtJQUVRLFNBQVM7UUFFYixzQkFBcUI7UUFDckIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUM7UUFFekIsbUJBQWtCO1FBQ2xCLHlDQUF3QztRQUN4Qyx5Q0FBd0M7UUFDeEMsNENBQTJDO1FBQzNDLDBDQUF5QztRQUV6QywwQ0FBWSxDQUFDLFNBQVMsQ0FBQywwQ0FBWSxDQUFDLGNBQWMsRUFBRSxDQUFDLElBQUksQ0FBQztRQUUxRCxxQkFBb0I7UUFDcEIsd0NBQXVDO0lBQzNDO0NBQ0o7QUFsR0Esa0NBa0dBIiwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJHYW1lT3Zlck1hbmFnZXIudHMiXSwic291cmNlc0NvbnRlbnQiOltudWxsXX0=","ScriptHash":"c557d4d9e5ec1c4ae5a67421fe344219","Specifier":"@assets/Experience/tower-of-time/Scripts/GameOverManager","DefaultTypeName":"@assets/Experience/tower-of-time/Scripts/GameOverManager.GameOverManager","IsMonobehaviour":true,"IsScriptableObj":false,"InheritanceChain":["@assets/Experience/tower-of-time/Scripts/GameOverManager.GameOverManager","UnityEngine.MonoBehaviour","UnityEngine.Behaviour","UnityEngine.Component","UnityEngine.Object","@com.genies.scripting@1.13.0\\Runtime\\Typing\\index.d.System.Object"],"Properties":[{"Path":"restartButton","Name":"restartButton","TypeName":"UnityEngine.UI.Button","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Restart
    Button","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"loadingPanel","Name":"loadingPanel","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Loading
    Panel","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"setupManager","Name":"setupManager","TypeName":"@assets/Experience/tower-of-time/Scripts/GameSetup.GameSetup","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":true,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Setup
    Manager","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"roundsSurvivedText","Name":"roundsSurvivedText","TypeName":"TMPro.TextMeshProUGUI","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Rounds
    Survived Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"yourBestText","Name":"yourBestText","TypeName":"TMPro.TextMeshProUGUI","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Your
    Best Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"playerRoot","Name":"playerRoot","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Player
    Root","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"spawner","Name":"spawner","TypeName":"@assets/Experience/tower-of-time/Scripts/EnemySpawner.EnemySpawner","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":true,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Spawner","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"turrets","Name":"turrets","TypeName":"@assets/Experience/tower-of-time/Scripts/Turret.Turret","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":1,"IsArray":true,"IsEnum":false,"ArrayElementInitializer":{"Path":"turrets_D1","Name":"turrets","TypeName":"@assets/Experience/tower-of-time/Scripts/Turret.Turret","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":true,"IsGeniesScriptableObjectRef":false,"Decorators":[],"Initializers":[],"ArrayDimension":1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Turrets","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},"ChildProperties":[],"PrettyName":"Turrets","_arrayElementInitializerJson":"{\"Path\":\"turrets_D1\",\"Name\":\"turrets\",\"TypeName\":\"@assets/Experience/tower-of-time/Scripts/Turret.Turret\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":true,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[],\"Initializers\":[],\"ArrayDimension\":1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Turrets\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null}","_childPropertiesJson":"[]","_prettyName":null}],"SupportedUiEvents":"None"}'
