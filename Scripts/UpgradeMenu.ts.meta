fileFormatVersion: 2
guid: 0022f51d82b21754599d70a0460e5236
ScriptedImporter:
  internalIDToNameTable: []
  externalObjects: {}
  serializedVersion: 2
  userData: 
  assetBundleName: 
  assetBundleVariant: 
  script: {fileID: 11500000, guid: 22604dd76f55453daccee3ed9e7b94b5, type: 3}
  SerializedAsset: '{"__scriptableObject__name":"UpgradeMenu","__scriptableObject__type":"Genies.Scripting.AssetTypes.TsAsset,
    Genies.Scripting, Version=0.0.0.0, Culture=neutral, PublicKeyToken=null","IsCompiled":true,"CompilerVersion":"2.0.66","ReferencedSpecifiers":["@assets/Experience/tower-of-time/Scripts/UpgradeItem","@assets/Experience/tower-of-time/Scripts/CameraMovement","@assets/Experience/tower-of-time/Scripts/RoundManager"],"Source":"\"use
    strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst
    UnityEngine_1 = require(\"UnityEngine\");\nconst UpgradeItem_1 = require(\"@assets/Experience/tower-of-time/Scripts/UpgradeItem\");\nconst
    CameraMovement_1 = require(\"@assets/Experience/tower-of-time/Scripts/CameraMovement\");\nconst
    RoundManager_1 = require(\"@assets/Experience/tower-of-time/Scripts/RoundManager\");\nclass
    UpgradeMenu extends UnityEngine_1.MonoBehaviour {\n    //Called when script instance
    is loaded\n    Awake() {\n        UpgradeMenu.Instance = this;\n    }\n    //Start
    is called on the frame when a script is enabled just \n    //before any of the
    Update methods are called the first time.\n    Start() {\n        this.gameManager
    = CameraMovement_1.default.Instance;\n        // Setup upgrade items\n       
    //this.SetupUpgradeItems();\n    }\n    OnEnable() {\n        // Setup upgrade
    items\n        this.SetupUpgradeItems();\n        this.chooseText.SetActive(true);\n   
    }\n    //Update is called every frame, if the MonoBehaviour is enabled.\n   
    Update() { }\n    SetupUpgradeItems() {\n        // true if one of the options
    is rare or legendary\n        let hasRare = false;\n        // Type candidates
    for the upgrades\n        let typeArray = [UpgradeItem_1.UpgradeType.CARRYING_STRENGTH,
    UpgradeItem_1.UpgradeType.CARRY_CAPACITY,\n            UpgradeItem_1.UpgradeType.CHOP_SPEED,
    UpgradeItem_1.UpgradeType.REGROWTH_TIME, UpgradeItem_1.UpgradeType.WALK_SPEED];\n       
    // Cycle through the upgrade options, and set up them one by one\n        for
    (let i = 0; i < this.upgrades.length; i++) {\n            // First determine
    rarity of upgrade\n            let randomNumber = // @ts-ignore\n            
    UnityEngine_1.Random.Range_EBB7509C_H1075CF37(0.0, 100.0);\n            let rarity
    = (hasRare && randomNumber > 74.9) ? UpgradeItem_1.Rarity.UNCOMMON : this.UpgradeRarity(randomNumber);\n           
    if (rarity == UpgradeItem_1.Rarity.RARE && !hasRare || rarity == UpgradeItem_1.Rarity.LEGENDARY
    && !hasRare)\n                hasRare = true;\n            // Set rarity\n           
    this.upgrades[i].rarity = rarity;\n            // Determine upgrade type\n           
    this.upgrades[i].upgradeType = this.GetUpgradeType(rarity, typeArray);\n           
    // Remove upgrade type from the array, to prevent multiple options of the same
    type\n            typeArray = typeArray.filter(n => n !== this.upgrades[i].upgradeType);\n           
    // FINALLY Setup upgrade item\n            this.upgrades[i].SetupUpgradeItem();\n       
    }\n    }\n    // randomNumber is a value between 0 and 100\n    UpgradeRarity(randomNumber)
    {\n        let rarity = UpgradeItem_1.Rarity.COMMON;\n        if (randomNumber
    < 50.0)\n            rarity = UpgradeItem_1.Rarity.COMMON;\n        else if (randomNumber
    < 75.0)\n            rarity = UpgradeItem_1.Rarity.UNCOMMON;\n        else if
    (randomNumber < 90.0)\n            rarity = UpgradeItem_1.Rarity.RARE;\n       
    else\n            rarity = UpgradeItem_1.Rarity.LEGENDARY;\n        return rarity;\n   
    }\n    GetUpgradeType(rarity, types) {\n        let type = UpgradeItem_1.UpgradeType.WALK_SPEED;\n       
    if (rarity == UpgradeItem_1.Rarity.LEGENDARY) {\n            // Special type
    for legendary options\n            type = ( // @ts-ignore\n            UnityEngine_1.Random.Range_EBB7509C_H1075CF37(0.0,
    100.0) > 65.0 && RoundManager_1.default.round > 5) ?\n                UpgradeItem_1.UpgradeType.TURRET_DAMAGE
    : UpgradeItem_1.UpgradeType.HEAL_FULL;\n        }\n        else {\n           
    // Get random normal type\n            let r = // @ts-ignore\n             UnityEngine_1.Random.Range_EBB7509C_H2CFB2EE5(0,
    types.length);\n            type = types[r];\n        }\n        return type;\n   
    }\n    PlaySelectedUpgradeAnimation(option) {\n        // Disable \"choose\"
    text\n        this.chooseText.SetActive(false);\n        // Play animation\n       
    switch (option) {\n            case 1:\n                // @ts-ignore\n               
    this.animator.Play_EBB7509C_H78681CF5((\"First_Option\"), -1, (0));\n               
    break;\n            case 2:\n                // @ts-ignore\n                this.animator.Play_EBB7509C_H78681CF5((\"Second_Option\"),
    -1, (0));\n                break;\n            case 3:\n                // @ts-ignore\n               
    this.animator.Play_EBB7509C_H78681CF5((\"Third_Option\"), -1, (0));\n               
    break;\n        }\n        // Play Sound\n        this.source.clip = this.clips[0];\n       
    this.source.pitch = 1;\n        this.source.volume = 1;\n        this.source.Play();\n       
    // Wait for animation, then pan to tower\n        this.StartCoroutine(this.AfterUpgrade());\n   
    }\n    *AfterUpgrade() {\n        yield new UnityEngine_1.WaitForSeconds(1.3);\n       
    this.gameManager.ChangeCameraState(CameraMovement_1.CameraState.PAN_TO_CLOCK_TOWER);\n   
    }\n    DestroyInstance() {\n        console.log(`Destroying UpgradeMenu`);\n       
    UpgradeMenu.Instance = null;\n        UnityEngine_1.GameObject.Destroy(this.gameObject);\n   
    }\n}\nexports.default = UpgradeMenu;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFBSSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1FBQ2hDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLENBQUM7UUFDckIsSUFBSSxDQUFDLE1BQU0sQ0FBQyxNQUFNLEdBQUcsQ0FBQztRQUN0QixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRTtRQUVsQix3Q0FBdUM7UUFDdkMsSUFBSSxDQUFDLGNBQWMsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7SUFDNUM7SUFFQSxDQUFDLFlBQVk7UUFFVCxNQUFNLElBQUksNEJBQWMsQ0FBQyxHQUFHLENBQUM7UUFFN0IsSUFBSSxDQUFDLFdBQVcsQ0FBQyxpQkFBaUIsQ0FBQyw0QkFBVyxDQUFDLGtCQUFrQixDQUFDO0lBQ3RFO0lBRU8sZUFBZTtRQUVsQixPQUFPLENBQUMsR0FBRyxDQUFDLHdCQUF3QixDQUFDO1FBRXJDLFdBQVcsQ0FBQyxRQUFRLEdBQUcsSUFBSTtRQUMzQix3QkFBVSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3ZDO0NBQ0o7QUF6SkEsOEJBeUpBIiwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlcyI6WyJVcGdyYWRlTWVudS50cyJdLCJzb3VyY2VzQ29udGVudCI6W251bGxdfQ==","ScriptHash":"fc7b1e21ef553dddaf9f0cc6515d7e78","Specifier":"@assets/Experience/tower-of-time/Scripts/UpgradeMenu","DefaultTypeName":"@assets/Experience/tower-of-time/Scripts/UpgradeMenu.UpgradeMenu","IsMonobehaviour":true,"IsScriptableObj":false,"InheritanceChain":["@assets/Experience/tower-of-time/Scripts/UpgradeMenu.UpgradeMenu","UnityEngine.MonoBehaviour","UnityEngine.Behaviour","UnityEngine.Component","UnityEngine.Object","@com.genies.scripting@1.13.0\\Runtime\\Typing\\index.d.System.Object"],"Properties":[{"Path":"upgrades","Name":"upgrades","TypeName":"@assets/Experience/tower-of-time/Scripts/UpgradeItem.UpgradeItem","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":1,"IsArray":true,"IsEnum":false,"ArrayElementInitializer":{"Path":"upgrades_D1","Name":"upgrades","TypeName":"@assets/Experience/tower-of-time/Scripts/UpgradeItem.UpgradeItem","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":true,"IsGeniesScriptableObjectRef":false,"Decorators":[],"Initializers":[],"ArrayDimension":1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Upgrades","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},"ChildProperties":[],"PrettyName":"Upgrades","_arrayElementInitializerJson":"{\"Path\":\"upgrades_D1\",\"Name\":\"upgrades\",\"TypeName\":\"@assets/Experience/tower-of-time/Scripts/UpgradeItem.UpgradeItem\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":true,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[],\"Initializers\":[],\"ArrayDimension\":1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Upgrades\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null}","_childPropertiesJson":"[]","_prettyName":null},{"Path":"animator","Name":"animator","TypeName":"UnityEngine.Animator","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Animator","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"source","Name":"source","TypeName":"UnityEngine.AudioSource","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Source","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},{"Path":"clips","Name":"clips","TypeName":"UnityEngine.AudioClip","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":1,"IsArray":true,"IsEnum":false,"ArrayElementInitializer":{"Path":"clips_D1","Name":"clips","TypeName":"UnityEngine.AudioClip","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[],"Initializers":[],"ArrayDimension":1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Clips","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null},"ChildProperties":[],"PrettyName":"Clips","_arrayElementInitializerJson":"{\"Path\":\"clips_D1\",\"Name\":\"clips\",\"TypeName\":\"UnityEngine.AudioClip\",\"AssemblyName\":null,\"EnumKeys\":[],\"EnumValues\":[],\"IsGeniesBehaviourRef\":false,\"IsGeniesScriptableObjectRef\":false,\"Decorators\":[],\"Initializers\":[],\"ArrayDimension\":1,\"IsArray\":false,\"IsEnum\":false,\"ArrayElementInitializer\":null,\"ChildProperties\":[],\"PrettyName\":\"Clips\",\"_arrayElementInitializerJson\":null,\"_childPropertiesJson\":\"[]\",\"_prettyName\":null}","_childPropertiesJson":"[]","_prettyName":null},{"Path":"chooseText","Name":"chooseText","TypeName":"UnityEngine.GameObject","AssemblyName":null,"EnumKeys":[],"EnumValues":[],"IsGeniesBehaviourRef":false,"IsGeniesScriptableObjectRef":false,"Decorators":[{"Type":"SerializeField","Args":[]}],"Initializers":[],"ArrayDimension":-1,"IsArray":false,"IsEnum":false,"ArrayElementInitializer":null,"ChildProperties":[],"PrettyName":"Choose
    Text","_arrayElementInitializerJson":null,"_childPropertiesJson":"[]","_prettyName":null}],"SupportedUiEvents":"None"}'
